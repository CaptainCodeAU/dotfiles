# .envrc for direnv integration
# This file triggers the direnvrc hooks

# Essential venv activation (must be included)
# Only set VIRTUAL_ENV_PROMPT and activate if venv actually exists
if [[ -d ".venv" ]]; then
    export VIRTUAL_ENV_PROMPT="($(basename "$PWD"))"
    source .venv/bin/activate
elif [[ -d "venv" ]]; then
    export VIRTUAL_ENV_PROMPT="($(basename "$PWD"))"
    source venv/bin/activate
fi

# Clear the "direnv: loading..." line
printf "\033[A\033[2K"

echo ""
echo "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
echo -e "â”‚                      \033[35mğŸ¬ PROJECT-NAME\033[0m                           â”‚"
echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
echo "â”‚"
echo "â”‚  ğŸš€ Quick Start:"
echo "â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo -e "â”‚     \033[3;33mPROJECT-CLI\033[0m           # Run CLI tool"
echo -e "â”‚     \033[3;33muv run pytest\033[0m              # Run tests"
echo -e "â”‚     \033[3;33muv run python -m PROJECT-NAME.cli --help\033[0m"
echo "â”‚"
echo "â”‚  ğŸ§ª Testing:"
echo "â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo -e "â”‚     \033[3;33muv run pytest\033[0m              # Run all tests"
echo -e "â”‚     \033[3;33muv run pytest -v\033[0m           # Verbose output"
echo -e "â”‚     \033[3;33muv run pytest --cov\033[0m        # With coverage report"
echo "â”‚"
echo "â”‚  ğŸ”§ Code Quality:"
echo "â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo -e "â”‚     \033[3;33muv run ruff check .\033[0m        # Lint code"
echo -e "â”‚     \033[3;33muv run ruff format .\033[0m       # Format code"
echo -e "â”‚     \033[3;33muv run mypy src/\033[0m           # Type check"
echo "â”‚"
echo "â”‚  ğŸ“¦ Package Management:"
echo "â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo -e "â”‚     \033[3;33muv pip install <pkg>\033[0m       # Install package"
echo -e "â”‚     \033[3;33muv add <package>\033[0m           # Add to dependencies"
echo -e "â”‚     \033[3;33muv pip list\033[0m                # List installed packages"
echo "â”‚"
echo "â”‚  ğŸ”„ Development:"
echo "â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo -e "â”‚     \033[3;33muv pip install -e .\033[0m        # Reinstall in editable mode"
echo -e "â”‚     \033[3;33muv pip install -e '.[dev]'\033[0m # With dev dependencies"
echo "â”‚"
echo "â”‚  â„¹ï¸  Info:"
echo "â”‚  â”€â”€â”€â”€â”€â”€â”€â”€"
echo -e "â”‚     Python: \033[36m$(uv run python --version 2>&1 | cut -d' ' -f2)\033[0m"
echo -e "â”‚     Binary: \033[36m$(which python)\033[0m"
echo -e "â”‚     Project: \033[36m$(basename "$PWD")\033[0m"
echo -e "â”‚     Version: \033[36m$(uv run python -c "import PROJECT-NAME; print(PROJECT-NAME.__version__)" 2>/dev/null || echo "0.1.0")\033[0m"
echo "â”‚"
echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
echo ""
echo "â”‚  â„¹ï¸  Environment Info:"
echo "â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo -e "â”‚     Machine: \033[36m$(hostname)\033[0m"
echo -e "â”‚     Kernel:  \033[36m$(uname -r)\033[0m"
echo -e "â”‚     Shell:   \033[36m$SHELL\033[0m"
echo "â”‚"
echo "â”‚  ğŸ“ VSCode Settings Check:"
echo "â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
if [[ "$(uname -s)" == "Darwin" ]]; then
    # macOS - check local app settings
    if grep -q "titleBar.activeBackground" "$HOME/Library/Application Support/Code/User/settings.json" 2>/dev/null; then
        echo -e "â”‚     VSCode:  \033[32mâœ“ Configured\033[0m"
    else
        echo -e "â”‚     VSCode:  \033[33mâœ— Not configured\033[0m"
    fi
    if grep -q "titleBar.activeBackground" "$HOME/Library/Application Support/Cursor/User/settings.json" 2>/dev/null; then
        echo -e "â”‚     Cursor:  \033[32mâœ“ Configured\033[0m"
    else
        echo -e "â”‚     Cursor:  \033[33mâœ— Not configured\033[0m"
    fi
else
    # Linux/WSL - check remote server settings
    if [[ -f "$HOME/.vscode-server/data/Machine/settings.json" ]]; then
        echo -e "â”‚     VSCode:  \033[32mâœ“ Found\033[0m"
    else
        echo -e "â”‚     VSCode:  \033[33mâœ— Not found\033[0m"
    fi
    if [[ -f "$HOME/.cursor-server/data/Machine/settings.json" ]]; then
        echo -e "â”‚     Cursor:  \033[32mâœ“ Found\033[0m"
    else
        echo -e "â”‚     Cursor:  \033[33mâœ— Not found\033[0m"
    fi
fi
echo "â”‚"
echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
echo ""
